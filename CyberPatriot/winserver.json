{
    "builders": [
  
      {
        "communicator": "winrm",
        "winrm_port": "5985",
        "disk_size": "{{user `disk_size`}}",
        "floppy_files": [
          "floppy/Win2012/Autounattend.xml"
        ],
        "guest_additions_mode": "attach",
        "guest_os_type": "Windows2012_64",
        "hard_drive_interface": "sata",
        "headless": "{{ user `headless` }}",
        "iso_checksum": "{{ user `iso_checksum` }}",
        "iso_checksum_type": "sha1",
        "iso_url": "{{ user `iso_url` }}",
        "shutdown_command": "{{ user `shutdown_command`}}",
        "post_shutdown_delay": "30s",
        "type": "virtualbox-iso",
        "output_directory": "output-virtualbox",
        "vboxmanage": [
          [
            "modifyvm",
            "{{.Name}}",
            "--memory",
            "2048"
          ],
          [
            "modifyvm",
            "{{.Name}}",
            "--cpus",
            "2"
          ],
          [
            "setextradata",
            "{{.Name}}",
            "VBoxInternal/CPUM/CMPXCHG16B",
            "1"
          ],
          [
            "modifyvm",
            "{{.Name}}",
            "--natpf1",
            "guestwinrm,tcp,127.0.0.1,5985,,5985"
          ]
        ],
        "vm_name": "Win2012r2",
        "winrm_password": "Administrator",
        "winrm_timeout": "10000s",
        "winrm_username": "UberPassword"
      },
      {
        "communicator": "winrm",
        "winrm_port": "5985",
        "disk_size": "{{user `disk_size`}}",
        "floppy_files": [
          "floppy/Autounattend.xml"
        ],
        "guest_additions_mode": "attach",
        "guest_os_type": "Windows2012_64",
        "hard_drive_interface": "sata",
        "headless": "{{ user `headless` }}",
        "iso_checksum": "{{ user `iso_checksum` }}",
        "iso_checksum_type": "sha1",
        "iso_url": "{{ user `iso_url` }}",
        "shutdown_command": "{{ user `shutdown_command`}}",
        "post_shutdown_delay": "30s",
        "type": "vmware-iso",
        "output_directory": "output-vmware",
        "vboxmanage": [
          [
            "modifyvm",
            "{{.Name}}",
            "--memory",
            "2048"
          ],
          [
            "modifyvm",
            "{{.Name}}",
            "--cpus",
            "2"
          ]
        ],
        "vm_name": "Win2012r2",
        "winrm_password": "Administrator",
        "winrm_timeout": "10000s",
        "winrm_username": "UberPassword"
      }
  
    ],
    "post-processors": [
      {
        "type": "manifest",
        "output": "manifest.json",
        "strip_path": true
      }
    ],
    "provisioners": [
      {
        "environment_vars": [
          "CM={{user `cm`}}",
          "CM_VERSION={{user `cm_version`}}",
          "UPDATE={{user `update`}}"
        ],
        "scripts": [
          "scripts/winserver/AdPrereqs.ps1"
        ],
        "type": "powershell"
      }
    ],
    "variables": {
      "cm": "chef",
      "cm_version": "",
      "disk_size": "40960",
      "headless": "false",
      "iso_checksum": "b6f063436056510357cb19cb77db781ed9c11df3",
      "iso_url": "../ISO/Win2012R2.iso",
      "shutdown_command": "shutdown /s /t 10 /f /d p:4:1 /c \"Packer Shutdown\"",
      "update": "true",
      "version": "0.1.0"
    }
  }